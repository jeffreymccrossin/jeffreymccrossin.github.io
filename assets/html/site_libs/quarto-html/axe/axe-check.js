class QuartoAxeReporter{constructor(e,t){this.axeResult=e,this.options=t}report(){throw new Error("report() is an abstract method")}}class QuartoAxeJsonReporter extends QuartoAxeReporter{constructor(e,t){super(e,t)}report(){}}class QuartoAxeConsoleReporter extends QuartoAxeReporter{constructor(e,t){super(e,t)}report(){for(const e of this.axeResult.violations)for(const t of e.nodes)for(const e of t.target);}}class QuartoAxeDocumentReporter extends QuartoAxeReporter{constructor(e,t){super(e,t)}createViolationElement(e){const t=document.createElement("div"),o=document.createElement("div");o.className="quarto-axe-violation-description",o.innerText=`${e.impact.replace(/^[a-z]/,e=>e.toLocaleUpperCase())}: ${e.description}`,t.appendChild(o);const r=document.createElement("div");r.className="quarto-axe-violation-help",r.innerText=e.help,t.appendChild(r);const a=document.createElement("div");a.className="quarto-axe-violation-nodes",t.appendChild(a);const n=document.createElement("div");n.className="quarto-axe-violation-selector";for(const t of e.nodes){for(const e of t.target){const t=document.createElement("span");t.className="quarto-axe-violation-target",t.innerText=e,n.appendChild(t),n.addEventListener("mouseenter",()=>{const t=document.querySelector(e);t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.classList.add("quarto-axe-hover-highlight"),setTimeout(()=>{t.style.border=""},2e3))}),n.addEventListener("mouseleave",()=>{const t=document.querySelector(e);t&&t.classList.remove("quarto-axe-hover-highlight")}),n.addEventListener("click",()=>{}),n.appendChild(t)}a.appendChild(n)}return t}report(){const e=this.axeResult.violations,t=document.createElement("div");if(t.className="quarto-axe-report",0===e.length){const e=document.createElement("div");e.className="quarto-axe-no-violations",e.innerText="No axe-core violations found.",t.appendChild(e)}e.forEach(e=>{t.appendChild(this.createViolationElement(e))}),document.querySelector("main").appendChild(t)}}const reporters={json:QuartoAxeJsonReporter,console:QuartoAxeConsoleReporter,document:QuartoAxeDocumentReporter};class QuartoAxeChecker{constructor(e){this.options=e}async init(){const e=(await import("https://cdn.skypack.dev/pin/axe-core@v4.10.3-aVOFXWsJaCpVrtv89pCa/mode=imports,min/optimized/axe-core.js")).default,t=await e.run({exclude:["[data-tabster-dummy]"],preload:{assets:["cssom"],timeout:5e4}});(!0===this.options?new QuartoAxeConsoleReporter(t):new reporters[this.options.output](t,this.options)).report()}}export async function init(){const e=document.querySelector("#quarto-axe-checker-options");if(e){const t=JSON.parse(atob(e.textContent)),o=new QuartoAxeChecker(t);await o.init()}}